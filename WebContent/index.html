<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<link rel="stylesheet" href="css/bootstrap.min.css">
<script src="js/angular.min.js"></script>
<script src="js/ui-bootstrap-tpls-1.3.3.min.js"></script>
<script src="js/app.js"></script>
<script src="js/xmlWriter.js"></script>
<title>XML Project</title>
</head>
<body>
	<div data-ng-app="app" data-ng-controller="appController">
		<div class="container">
			<h2>Meni</h2>
			<div>
				<button class="btn btn-primary" data-ng-click="test()">Test</button>
				<form>
					<h3>Pretraga</h3>
					<input data-ng-model="searchTerm" type="text" class="form-control"
						placeholder="Tekst za pretragu" required>
					<button class="btn btn-primary" data-ng-click="search()">Pretraži</button>
				</form>
				<div data-ng-show="searchResults.length">
					<h4>Rezultati pretrage</h4>
					<div data-ng-repeat="result in searchResults">
						<div>{{result.name}}</div>
						<button class="btn btn-primary"
							data-ng-click="openDocument(result)">Otvori</button>
					</div>
				</div>
			</div>
			<div data-ng-show="document">
				<button class="btn btn-primary" data-ng-click="downloadXML()">XML</button>
				<button class="btn btn-primary" data-ng-click="downloadXHTML()">XHTML</button>
				<button class="btn btn-primary" data-ng-click="downloadPDF()">PDF</button>
				<h2 data-ng-bind="document.name"></h2>
			</div>
			<div data-ng-show="loggedIn">
				<h3>Akti i amandmani</h3>
				<div data-ng-show="myActs.length > 0 && !amendmentAct">
					<h4>Vaši predlozi akata</h4>
					<table class="table-condensed">
						<tr data-ng-repeat="myAct in myActs">
							<th>{{myAct.Naziv}}</th>
							<td>&nbsp;</td>
							<td><button class="btn btn-primary"
									data-ng-click="openDocument(myAct)">Otvori</button></td>
							<td><button class="btn btn-primary"
									data-ng-click="removeAct(myAct)">Povuci</button></td>
						</tr>
					</table>
				</div>
				<div data-ng-hide="amendmentAct">
					<h4>Predložite akt</h4>
					<button class="btn btn-primary" data-ng-hide="showNewAct"
						data-ng-click="newAct()">Predložite akt</button>
					<br /> <br />
					<div data-ng-show="showNewAct">
						<form class="form-group">
							<label>Preambula:</label>
							<textarea class="form-control"
								data-ng-model="materijalniPravniOsnov" rows="5"
								placeholder="Materijalni pravni osnov za donošenje propisa"></textarea>
							<textarea class="form-control" data-ng-model="formalniPravniOsnov"
								rows="5" placeholder="Formalni pravni osnov za donošenje propisa"></textarea>
							<input type="text" class="form-control"
								data-ng-model="nazivDonosiocaPropisa"
								placeholder="Naziv organa koji donosi propis za donošenje propisa"></input>
							<input type="text" class="form-control"
								data-ng-model="saglasnostOrgana"
								placeholder="Naziv organa koji je dao saglasnost"></input>
							<textarea class="form-control" data-ng-model="saglasnostNaznaka"
								rows="5" placeholder="Naznaka o datoj saglasnosti"></textarea>
							<label>Naziv:</label> <input class="form-control" type="text"
								data-ng-model="nazivPropisa" placeholder="Naziv propisa">
							<br />
							<div class="alert alert-info" role="alert">
								<strong>Kako se piše predlog propisa:</strong> <br /> Delovi
								mogu imati nazive. Ako jedan deo ima naziv, svi moraju imati. <br />
								Deo se mora deliti na barem dve glave. <br /> Glave, odeljci i
								pododeljci moraju imati nazive. <br /> Glave i odeljci mogu
								imati članove, pa da se kasnije dele na niže klasifikacione
								jedinice. Ukoliko se na početku dele, moraju imati barem dve niže
								klasifikacione jedinice istog nivoa. <br /> Član mora imati
								naziv, osim u slučaju kada je jedini član u glavi, odeljku ili
								pododeljku. <br /> Stavovi, tačke, podtačke i alineje sadrže
								tekst. <br /> Stavovi mogu da se dele na tačke, tačke na
								podtačke, podtačke na alineje. Jedan element uvek mora na barem
								dva podelementa da se deli.
							</div>
							<label>Sadržaj:</label>
							<div data-ng-repeat="element in elements">
								<select class="form-control"
									data-ng-options="part for part in parts"
									data-ng-model="element.type"></select>
								<textarea data-ng-show="inputType[element.type] == 'textarea'"
									class="form-control" data-ng-model="element.value" rows="2"
									placeholder="Sadržaj"></textarea>
								<input data-ng-show="inputType[element.type] == 'input'"
									class="form-control" data-ng-model="element.value"
									placeholder="Naziv"></input>
								<button class="btn btn-primary" data-ng-click="remove(element)">Ukloni</button>
								<br />
							</div>
							<br />
							<button class="btn btn-primary" data-ng-click="addNewElement()">Dodaj</button>
							<br /> <label>Obrazloženje:</label>
							<textarea class="form-control" data-ng-model="obrazlozenje"
								rows="5" placeholder="Obrazloženje za predlaganje propisa"></textarea>
							<br /> <br />
							<button class="btn btn-primary" data-ng-click="saveNewAct()">Predloži</button>
							<button class="btn btn-primary" data-ng-click="closeNewAct()">Otkaži</button>
							<div class="alert alert-danger" role="alert"
								data-ng-repeat="errorMessage in errorMessages">
								{{errorMessage}}</div>
						</form>
					</div>
				</div>
				<div data-ng-show="suggestedActs.length > 0 && !amendmentAct">
					<h4>Trenutni predlozi akata</h4>
					<table class="table-condensed">
						<tr>
							<th>Broj propisa</th>
							<th>Naziv propisa</th>
							<th>U proceduri?</th>
						</tr>
						<tr data-ng-repeat="act in suggestedActs">
							<td>{{act.brojPropisa}}</td>
							<td>{{act.Naziv}}</td>							
							<td data-ng-show="act.status == 'predlog'">NE</td>
							<td data-ng-show="act.status == 'usvojen u nacelu'">DA</td>
							<td><button class="btn btn-primary"
									data-ng-click="openDocument(act)">Otvori</button></td>
							<td><button class="btn btn-primary"
									data-ng-click="createAmendment(act)">Predloži amandman</button></td>
							<td data-ng-show="act.usernameDonosioca == loggedInUser.username"><button class="btn btn-primary"
									data-ng-click="removeAct(act)">Povuci</button></td>
						</tr>
					</table>
				</div>
					
				<div data-ng-show="amendmentAct">
					<form class="form-group">
						<h4>Amandman za predlog propisa broj {{amendmentAct.brojPropisa}}. {{amendmentAct.Naziv}}</h4>
						<label>Tip amandmana:</label>
						<select class="form-control"
								data-ng-options="type for type in amendmentTypes"
								data-ng-model="amendmentType"></select>
						<br />
						<label data-ng-show="amendmentType == 'Brisanje'">Briše se:</label>
						<label data-ng-show="amendmentType == 'Izmena'">Menja se:</label>
						<label data-ng-show="amendmentType == 'Dopuna'">Nakon:</label>
						<select multiple class="form-control"
							data-ng-options="part for part in amendmentActParts"
							data-ng-model="referenceParts"
						></select>
						<br />
						<br />
						<div data-ng-hide="amendmentType == 'Brisanje'">
							<div class="alert alert-info" role="alert" data-ng-show="amendmentType == 'Dopuna'">
								<strong>Dopuna:</strong>
								<br />
								Izaberite deo, glavu, odeljak, pododeljak, član, stav, tačku, podtačku ili alineju
								predloga propisa nakon kog želite ubaciti novi element <strong>istog tipa</strong>. 
								<br />
								Za strukturu važe ista pravila kao i za predlog propisa.
								<br />
								Napišite samo nov sadržaj.
							</div>
							<div class="alert alert-info" role="alert" data-ng-show="amendmentType == 'Izmena'">
								<strong>Izmena:</strong>
								<br />
								Izaberite član, stav, tačku, podtačku ili alineju
								predloga propisa koji želite da menjate elementom <strong>istog tipa</strong>. 
								<br />
								Za strukturu važe ista pravila kao i za predlog propisa.
								<br />
								Napišite ceo nov sadržaj.
							</div>
							<label>Novi sadržaj:</label>
							<div data-ng-repeat="element in elements">
								<select data-ng-show="amendmentType == 'Dopuna'" class="form-control"
									data-ng-options="part for part in parts"
									data-ng-model="element.type"></select>
								<select data-ng-show="amendmentType == 'Izmena'" class="form-control"
									data-ng-options="part for part in subparts"
									data-ng-model="element.type"></select>
								<textarea data-ng-show="inputType[element.type] == 'textarea'"
									class="form-control" data-ng-model="element.value" rows="2"
									placeholder="Sadržaj"></textarea>
								<input data-ng-show="inputType[element.type] == 'input'"
									class="form-control" data-ng-model="element.value"
									placeholder="Naziv"></input>
								<br />
								<button class="btn btn-primary" data-ng-click="remove(element)">Ukloni</button>
								<br />
								<br />
							</div>
							<br />
							<br />
							<button class="btn btn-primary" data-ng-click="addNewElement()">Dodaj</button>
						</div>
						<br />
						<label>Obrazloženje:</label>
						<textarea class="form-control" data-ng-model="obrazlozenje"
							rows="5" placeholder="Obrazloženje za predlaganje amandmana"></textarea>
						<br /> <br />
						<button class="btn btn-primary" data-ng-click="saveAmendment()">Predloži</button>
						<button class="btn btn-primary" data-ng-click="closeNewAct()">Otkaži</button>
						
					</form>
				</div>
			</div>
		</div>
		<div class="container" data-ng-hide="loggedIn">
			<form>
				<h2>Forma za prijavu</h2>
				<input data-ng-model="username" type="text" class="form-control"
					placeholder="Korisničko ime" required autofocus> <input
					data-ng-model="password" type="password" class="form-control"
					placeholder="Lozinka" required>
				<button class="btn btn-lg btn-primary btn-block"
					data-ng-click="login()">Prijavi se</button>
			</form>
			<div class="alert alert-danger" role="alert" data-ng-show="loginFail">Neuspešna prijava</div>
		</div>
	</div>
</body>
</html>